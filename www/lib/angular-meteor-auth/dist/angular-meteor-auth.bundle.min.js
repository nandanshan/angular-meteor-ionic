(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var _=Package.underscore._;var Tracker=Package.tracker.Tracker;var Deps=Package.tracker.Deps;var ReactiveVar=Package["reactive-var"].ReactiveVar;var Accounts=Package["accounts-base"].Accounts;var meteorInstall=Package.modules.meteorInstall;var Buffer=Package.modules.Buffer;var process=Package.modules.process;var Symbol=Package["ecmascript-runtime"].Symbol;var Map=Package["ecmascript-runtime"].Map;var Set=Package["ecmascript-runtime"].Set;var meteorBabelHelpers=Package["babel-runtime"].meteorBabelHelpers;var Promise=Package.promise.Promise;var require=meteorInstall({node_modules:{meteor:{"angular-meteor-auth":{dist:{"angular-meteor-auth.js":["babel-runtime/helpers/typeof",function(require,exports,module){var _typeof2=require("babel-runtime/helpers/typeof");var _typeof3=_interopRequireDefault(_typeof2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}(function(){function webpackUniversalModuleDefinition(root,factory){if((typeof exports==="undefined"?"undefined":(0,_typeof3["default"])(exports))==="object"&&(typeof module==="undefined"?"undefined":(0,_typeof3["default"])(module))==="object")module.exports=factory();else if(typeof define==="function"&&define.amd)define([],factory);else if((typeof exports==="undefined"?"undefined":(0,_typeof3["default"])(exports))==="object")exports["angularMeteorAuth"]=factory();else root["angularMeteorAuth"]=factory()}return webpackUniversalModuleDefinition})()(this,function(){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0)}([function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var name="angular-meteor.auth";exports["default"]=name;angular.module(name,["angular-meteor.mixer","angular-meteor.core","angular-meteor.view-model","angular-meteor.reactive"]).factory("$$Auth",["$Mixer",function($Mixer){var Accounts=(Package["accounts-base"]||{}).Accounts;if(!Accounts){throw Error("`angular-meteor.auth` module requires `accounts-base` package, "+"please run `meteor add accounts-base` before use")}var errors={required:"AUTH_REQUIRED",forbidden:"FORBIDDEN"};function $$Auth(){var vm=arguments.length<=0||arguments[0]===undefined?this:arguments[0];this.autorun(function(){vm.currentUser=Accounts.user();vm.currentUserId=Accounts.userId();vm.isLoggingIn=Accounts.loggingIn()})}$$Auth.$awaitUser=function(validate){var _this=this;validate=validate?this.$bindToContext($Mixer.caller,validate):function(){return true};if(!_.isFunction(validate)){throw Error("argument 1 must be a function")}var deferred=this.$$defer();var computation=this.autorun(function(computation){if(_this.getReactively("isLoggingIn"))return;computation.stop();if(!_this.currentUser)return _this.$$afterFlush(deferred.reject,errors.required);var isValid=validate(_this.currentUser);if(isValid===true)return _this.$$afterFlush(deferred.resolve,_this.currentUser);var error=void 0;if(_.isString(isValid)||isValid instanceof Error){error=isValid}else{error=errors.forbidden}return _this.$$afterFlush(deferred.reject,error)});var promise=deferred.promise;promise.stop=computation.stop.bind(computation);return promise};$$Auth.$$afterFlush=function(fn){var _fn;if(_.isString(fn)){fn=this[fn]}for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}return Tracker.afterFlush((_fn=fn).bind.apply(_fn,[this].concat(args)))};$$Auth.$waitForUser=function(){return this.$awaitUser()["catch"]()};$$Auth.$requireUser=function(){return this.$awaitUser()};$$Auth.$requireValidUser=function(){return this.$awaitUser.apply(this,arguments)};return $$Auth}]).service("$auth",["$rootScope","$$Auth",function($rootScope,$$Auth){var _this2=this;_.keys($$Auth).forEach(function(k){var stripped=k.substr(1);_this2[stripped]=function(){return $rootScope[k].apply($rootScope,arguments)}})}]).run(["$Mixer","$$Auth",function($Mixer,$$Auth){$Mixer.mixin($$Auth)}]);module.exports=exports["default"]}])})}]}}}}},{extensions:[".js",".json"]});require("./node_modules/meteor/angular-meteor-auth/dist/angular-meteor-auth.js");if(typeof Package==="undefined")Package={};Package["angular-meteor-auth"]={}})();