/*! angular-meteor-auth v1.0.3 */
!function(r,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.angularMeteorAuth=e():r.angularMeteorAuth=e()}(this,function(){return function(r){function e(n){if(t[n])return t[n].exports;var o=t[n]={exports:{},id:n,loaded:!1};return r[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var t={};return e.m=r,e.c=t,e.p="",e(0)}([function(r,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t="angular-meteor.auth";e["default"]=t,angular.module(t,["angular-meteor.mixer","angular-meteor.scope","angular-meteor.core","angular-meteor.view-model","angular-meteor.reactive"]).factory("$$Auth",["$Mixer","$log",function(r,e){function t(){var r=arguments.length<=0||void 0===arguments[0]?this:arguments[0];this.autorun(function(){r.currentUser=Meteor.user(),r.currentUserId=Meteor.userId(),r.isLoggingIn=Meteor.loggingIn()})}var n=(Package["accounts-base"]||{}).Accounts;if(!n)throw Error("`angular-meteor.auth` module requires `accounts-base` package, please run `meteor add accounts-base` before use");var o={required:"AUTH_REQUIRED",forbidden:"FORBIDDEN"};return t.$awaitUser=function(e){var t=this;if(e=e?this.$bindToContext(r.caller,e):function(){return!0},!_.isFunction(e))throw Error("argument 1 must be a function");var n=this.$$defer(),u=this.autorun(function(r){if(!t.getReactively("isLoggingIn")){if(r.stop(),!t.currentUser)return t.$$afterFlush(n.reject,o.required);var u=e(t.currentUser);if(u===!0)return t.$$afterFlush(n.resolve,t.currentUser);var a=void 0;return a=_.isString(u)||u instanceof Error?u:o.forbidden,t.$$afterFlush(n.reject,a)}}),a=n.promise;return a.stop=u.stop.bind(u),a},t.$$afterFlush=function(r){var e;_.isString(r)&&(r=this[r]);for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;t>o;o++)n[o-1]=arguments[o];return Tracker.afterFlush((e=r).bind.apply(e,[this].concat(n)))},t.$waitForUser=function(){return this.$awaitUser()["catch"](function(r){e.debug("user login has failed ("+r+")")})},t.$requireUser=function(){return this.$awaitUser()},t.$requireValidUser=function(){return this.$awaitUser.apply(this,arguments)},t}]).service("$auth",["$rootScope","$$Auth",function(r,e){var t=this;_.keys(e).forEach(function(e){var n=e.substr(1);t[n]=function(){return r[e].apply(r,arguments)}})}]).run(["$Mixer","$$Auth",function(r,e){r.mixin(e)}]),r.exports=e["default"]}])});
//# sourceMappingURL=angular-meteor-auth.min.js.map